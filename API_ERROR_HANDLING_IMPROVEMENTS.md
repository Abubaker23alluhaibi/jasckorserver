# ๐ง ุชุญุณููุงุช ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูู API

## ๐ ููุฎุต ุงูุชุญุณููุงุช

ุชู ุฅุฌุฑุงุก ูุญุต ุดุงูู ูุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูู ุฌููุน ุฃุฌุฒุงุก ุงููุดุฑูุน ุงููุชุนููุฉ ุจุงูู API.

## โ ุงูุชุญุณููุงุช ุงููุทุจูุฉ

### 1. Backend (`backend/server.js`)

#### ุฃ. Login Endpoint
- โ ุฅุถุงูุฉ logging ุดุงูู ูุชุชุจุน ูุญุงููุงุช ุชุณุฌูู ุงูุฏุฎูู
- โ ุชุญุณูู ุฑุณุงุฆู ุงูุฎุทุฃ ูุฅุฑุฌุงุน ุชูุงุตูู ุฃูุซุฑ
- โ ุงูุชุญูู ูู JWT_SECRET ูุจู ุฅูุดุงุก token
- โ ูุนุงูุฌุฉ ุฎุงุตุฉ ูุฃุฎุทุงุก Firebase
- โ ุฅุฑุฌุงุน ุชูุงุตูู ุงูุฎุทุฃ ูู development mode

#### ุจ. Request Logging Middleware
- โ ุชุณุฌูู ุฌููุน ุทูุจุงุช API ุงููุงุฑุฏุฉ
- โ ุชุณุฌูู origin ู content-type ู body (ุจุฏูู ูููุฉ ุงููุฑูุฑ)

### 2. Frontend - API Service (`josck system/src/services/apiService.ts`)

#### ุฃ. ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- โ ุชุญุณูู parsing ูุฑุณุงุฆู ุงูุฎุทุฃ ูู ุงูุจุงู ุฅูุฏ
- โ ุนุฑุถ ุชูุงุตูู ุงูุฎุทุฃ ูู development mode
- โ ูุนุงูุฌุฉ ุฃูุถู ูุฃุฎุทุงุก 500 ู 503
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ

### 3. Frontend - Storage (`josck system/src/utils/storage.ts`)

#### ุฃ. ุชุญุณูู ุฌููุน ุงูุฏูุงู
- โ `getDevices()` - ุฅุฑุฌุงุน error ุจุฏูุงู ูู array ูุงุฑุบ
- โ `addDevice()` - ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ
- โ `updateDevice()` - ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ
- โ `addReport()` - ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ
- โ `deleteDevice()` - ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ

### 4. Frontend - Pages

#### ุฃ. AdminDashboard
- โ ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูู `loadData()`
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ูููุณุชุฎุฏู

#### ุจ. OperationsDashboard
- โ ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูู `loadData()` ู `loadDevices()`
- โ ุชุญุณูู `handleReceiveFromTechnician()` ููููู async
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ูููุณุชุฎุฏู

#### ุฌ. TechnicianDashboard
- โ ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูู `loadDevices()`
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ูููุณุชุฎุฏู

#### ุฏ. CustomerServiceDashboard
- โ ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูู `handleSearch()`
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ูููุณุชุฎุฏู

#### ูู. Login
- โ ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก (ุชู ุณุงุจูุงู)
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ

### 5. Frontend - Components

#### ุฃ. AddDeviceModal
- โ ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูู `handleSubmit()`
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ

#### ุจ. AddUserModal
- โ ูุนุงูุฌุฉ ุฃุฎุทุงุก ุฌูุฏุฉ ููุฌูุฏุฉ ุจุงููุนู

## ๐ ุฃููุงุน ุงูุฃุฎุทุงุก ุงููุนุงูุฌุฉ

### 1. ุฃุฎุทุงุก ุงูุดุจูุฉ (Network Errors)
- `Failed to fetch`
- `ERR_CONNECTION_REFUSED`
- `NetworkError`
- `CORS errors`

### 2. ุฃุฎุทุงุก ุงููุตุงุฏูุฉ (Authentication Errors)
- `401 Unauthorized` - ุงูุชูุช ุตูุงุญูุฉ ุงูุฌูุณุฉ
- `403 Forbidden` - ููุณ ูุฏูู ุตูุงุญูุฉ
- `Invalid or expired token`

### 3. ุฃุฎุทุงุก ุงูุณูุฑูุฑ (Server Errors)
- `500 Internal Server Error` - ุฎุทุฃ ูู ุงูุณูุฑูุฑ
- `503 Service Unavailable` - Firebase ุบูุฑ ูุชุงุญ

### 4. ุฃุฎุทุงุก Firebase
- `PERMISSION_DENIED`
- `Firestore API not enabled`
- `Firebase not initialized`

## ๐ ุฑุณุงุฆู ุงูุฎุทุฃ

ุฌููุน ุฑุณุงุฆู ุงูุฎุทุฃ ุงูุขู:
- โ ูุงุถุญุฉ ููููููุฉ ุจุงูุนุฑุจูุฉ
- โ ุชุญุชูู ุนูู ูุนูููุงุช ูููุฏุฉ ูููุณุชุฎุฏู
- โ ุชุณุงุนุฏ ูู ุชุญุฏูุฏ ุงููุดููุฉ
- โ ูู development modeุ ุชุญุชูู ุนูู ุชูุงุตูู ุฃูุซุฑ

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. **ุงุฎุชุจุงุฑ ุดุงูู:**
   - ุงุฎุชุจุงุฑ ุฌููุน ุงูุนูููุงุช (CRUD)
   - ุงุฎุชุจุงุฑ ูู ุญุงูุงุช ุงูุฎุทุฃ ุงููุฎุชููุฉ
   - ุงุฎุชุจุงุฑ ูุน ุงููุทุงุน ุงูุงุชุตุงู

2. **ูุฑุงูุจุฉ ุงูุณุฌูุงุช:**
   - ูุฑุงูุจุฉ ุณุฌูุงุช Railway ููุจุงู ุฅูุฏ
   - ูุฑุงูุจุฉ Console ูู ุงููุชุตูุญ ูููุฑููุช ุฅูุฏ

3. **ุชุญุณููุงุช ุฅุถุงููุฉ (ุงุฎุชูุงุฑู):**
   - ุฅุถุงูุฉ retry mechanism ููุทูุจุงุช ุงููุงุดูุฉ
   - ุฅุถุงูุฉ loading states ุฃูุถู
   - ุฅุถุงูุฉ toast notifications ุจุฏูุงู ูู alerts

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

### Backend
- `backend/server.js` - ุชุญุณูู login endpoint ู request logging

### Frontend
- `josck system/src/services/apiService.ts` - ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- `josck system/src/utils/storage.ts` - ุชุญุณูู ุฌููุน ุงูุฏูุงู
- `josck system/src/pages/Login.tsx` - ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- `josck system/src/pages/AdminDashboard.tsx` - ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- `josck system/src/pages/OperationsDashboard.tsx` - ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- `josck system/src/pages/TechnicianDashboard.tsx` - ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- `josck system/src/pages/CustomerServiceDashboard.tsx` - ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- `josck system/src/components/operations/AddDeviceModal.tsx` - ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

## โ ุงููุชูุฌุฉ

ุงูุขู ุฌููุน ุฃุฌุฒุงุก ุงููุดุฑูุน:
- โ ุชุนุงูุฌ ุงูุฃุฎุทุงุก ุจุดูู ุตุญูุญ
- โ ุชุนุฑุถ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ูููุณุชุฎุฏู
- โ ุชุณุฌู ุงูุฃุฎุทุงุก ุจุดูู ููุตู ููุชุทููุฑ
- โ ุชุณุงุนุฏ ูู ุชุญุฏูุฏ ุงููุดุงูู ุจุณุฑุนุฉ

